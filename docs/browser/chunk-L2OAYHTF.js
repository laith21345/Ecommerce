import{a as D}from"./chunk-4HNKWMBY.js";import{a as B,b as d,c as G,d as V,f as z,g as M,h as Z,i as k,k as $}from"./chunk-R3YEN3BX.js";import{g as L}from"./chunk-C6P2FJG4.js";import{h as A}from"./chunk-IJX6AT3I.js";import{Cb as N,Db as F,Lb as a,Ta as s,Tb as P,Wb as C,ba as x,ea as q,jb as m,lb as h,pb as u,tb as r,ub as i,vb as p}from"./chunk-CCXG73UJ.js";var v=(e,n)=>({"is-invalid":e,"is-valid":n});function j(e,n){e&1&&(r(0,"p",17),a(1,"Name is Required"),i())}function O(e,n){e&1&&(r(0,"p",17),a(1,"Name Should be more than or equal 3 chars"),i())}function H(e,n){e&1&&(r(0,"p",17),a(1,"Name Should be less than or equal 20 chars"),i())}function I(e,n){if(e&1&&(r(0,"div",5),m(1,j,2,0,"p",17)(2,O,2,0)(3,H,2,0),i()),e&2){let o,l=F();s(),u(1,(o=l.registerForm.get("name"))!=null&&o.getError("required")?1:(o=l.registerForm.get("name"))!=null&&o.getError("minlength")?2:(o=l.registerForm.get("name"))!=null&&o.getError("maxlength")?3:-1)}}function J(e,n){e&1&&(r(0,"p",17),a(1,"email is Required"),i())}function K(e,n){e&1&&(r(0,"p",17),a(1,"Enter Valid Email "),i())}function Q(e,n){if(e&1&&(r(0,"div",5),m(1,J,2,0,"p",17)(2,K,2,0),i()),e&2){let o,l=F();s(),u(1,(o=l.registerForm.get("email"))!=null&&o.getError("required")?1:(o=l.registerForm.get("email"))!=null&&o.getError("email")?2:-1)}}function U(e,n){e&1&&(r(0,"p",17),a(1,"phone is Required"),i())}function W(e,n){e&1&&(r(0,"p",17),a(1,"accept only egypt phone numbers"),i())}function X(e,n){if(e&1&&(r(0,"div",5),m(1,U,2,0,"p",17)(2,W,2,0),i()),e&2){let o,l=F();s(),u(1,(o=l.registerForm.get("phone"))!=null&&o.getError("required")?1:(o=l.registerForm.get("phone"))!=null&&o.getError("pattern")?2:-1)}}function Y(e,n){e&1&&(r(0,"p",17),a(1,"password is Required"),i())}function ee(e,n){e&1&&(r(0,"p",17),a(1," * Start with a letter (either uppercase or lowercase). "),p(2,"br"),a(3," * Be between 6 and 9 characters in total. "),p(4,"br"),a(5," * Can only contain letters (A-Z or a-z) and numbers (0-9) "),p(6,"br"),i())}function te(e,n){if(e&1&&(r(0,"div",5),m(1,Y,2,0,"p",17)(2,ee,7,0),i()),e&2){let o,l=F();s(),u(1,(o=l.registerForm.get("password"))!=null&&o.getError("required")?1:(o=l.registerForm.get("password"))!=null&&o.getError("pattern")?2:-1)}}function ie(e,n){e&1&&(r(0,"div",5)(1,"p",17),a(2,"Password confirmation is incorrect"),i()())}function ne(e,n){e&1&&p(0,"i",16)}var pe=(()=>{let n=class n{constructor(){this._FormBuilder=x(k),this._AuthService=x(D),this._Router=x(L),this.isLoading=!1,this.msgSuccess=!1,this.registerForm=this._FormBuilder.group({name:[null,[d.required,d.minLength(3),d.maxLength(20)]],email:[null,[d.required,d.email]],phone:[null,[d.required,d.pattern(/^01[0125][0-9]{8}$/)]],password:[null,[d.required,d.pattern(/^([a-zA-Z]{1}[a-zA-Z0-9]{5,9})$/)]],rePassword:[null,[d.required]]},{validators:this.confirmPassword})}confirmPassword(l){return l.get("password")?.value==l.get("rePassword")?.value&&l.get("rePassword")?.value?null:{mismatch:!0}}submitRegistrationForm(){this.registerForm.valid&&!this.isLoading?(this.isLoading=!0,this.setRegistrationFormSub=this._AuthService.setRegistrationForm(this.registerForm.value).subscribe({next:l=>{l.message=="success"&&(this.msgSuccess=!0,this.isLoading=!1,setTimeout(()=>{this._Router.navigate(["/login"])},1e3))},error:l=>{this.isLoading=!1}})):this.registerForm.markAllAsTouched()}ngOnDestroy(){this.setRegistrationFormSub?.unsubscribe()}};n.\u0275fac=function(S){return new(S||n)},n.\u0275cmp=q({type:n,selectors:[["app-registration"]],standalone:!0,features:[P],decls:32,vars:28,consts:[[1,"w-75","mx-auto","my-1"],[1,"h3","fw-medium","text-main"],[3,"ngSubmit","formGroup"],["for","name"],["formControlName","name","id","name","type","text",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","mt-1"],[1,"mt-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control",3,"ngClass"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control",3,"ngClass"],["for","password"],["formControlName","password","id","password","type","password",1,"form-control",3,"ngClass"],["for","rePassword"],["formControlName","rePassword","id","rePassword","type","password",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","d-block","mt-1","px-4","ms-auto",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],[1,"m-0"]],template:function(S,t){if(S&1&&(r(0,"section",0)(1,"h1",1),a(2,"Register Now :"),i(),r(3,"form",2),N("ngSubmit",function(){return t.submitRegistrationForm()}),r(4,"div")(5,"label",3),a(6,"name :"),i(),p(7,"input",4),m(8,I,4,1,"div",5),i(),r(9,"div",6)(10,"label",7),a(11,"email :"),i(),p(12,"input",8),m(13,Q,3,1,"div",5),i(),r(14,"div",6)(15,"label",9),a(16,"phone :"),i(),p(17,"input",10),m(18,X,3,1,"div",5),i(),r(19,"div",6)(20,"label",11),a(21,"password :"),i(),p(22,"input",12),m(23,te,3,1,"div",5),i(),r(24,"div",6)(25,"label",13),a(26,"rePassword :"),i(),p(27,"input",14),m(28,ie,3,0,"div",5),i(),r(29,"button",15),a(30," Register "),m(31,ne,1,0,"i",16),i()()()),S&2){let g,w,_,E,c,R,f,b,y,T;s(3),h("formGroup",t.registerForm),s(4),h("ngClass",C(13,v,((g=t.registerForm.get("name"))==null?null:g.errors)&&(((g=t.registerForm.get("name"))==null?null:g.touched)||((g=t.registerForm.get("name"))==null?null:g.dirty)),!((g=t.registerForm.get("name"))!=null&&g.errors))),s(),u(8,(w=t.registerForm.get("name"))!=null&&w.errors&&((w=t.registerForm.get("name"))!=null&&w.touched)?8:-1),s(4),h("ngClass",C(16,v,((_=t.registerForm.get("email"))==null?null:_.errors)&&(((_=t.registerForm.get("email"))==null?null:_.touched)||((_=t.registerForm.get("email"))==null?null:_.dirty)),!((_=t.registerForm.get("email"))!=null&&_.errors))),s(),u(13,(E=t.registerForm.get("email"))!=null&&E.errors&&((E=t.registerForm.get("email"))!=null&&E.touched)?13:-1),s(4),h("ngClass",C(19,v,((c=t.registerForm.get("phone"))==null?null:c.errors)&&(((c=t.registerForm.get("phone"))==null?null:c.touched)||((c=t.registerForm.get("phone"))==null?null:c.dirty)),!((c=t.registerForm.get("phone"))!=null&&c.errors))),s(),u(18,(R=t.registerForm.get("phone"))!=null&&R.errors&&((R=t.registerForm.get("phone"))!=null&&R.touched)?18:-1),s(4),h("ngClass",C(22,v,((f=t.registerForm.get("password"))==null?null:f.errors)&&(((f=t.registerForm.get("password"))==null?null:f.touched)||((f=t.registerForm.get("password"))==null?null:f.dirty)),!((f=t.registerForm.get("password"))!=null&&f.errors))),s(),u(23,(b=t.registerForm.get("password"))!=null&&b.errors&&((b=t.registerForm.get("password"))!=null&&b.touched)?23:-1),s(4),h("ngClass",C(25,v,t.registerForm.errors&&(((y=t.registerForm.get("rePassword"))==null?null:y.touched)||((y=t.registerForm.get("rePassword"))==null?null:y.dirty)),!t.registerForm.errors)),s(),u(28,t.registerForm.errors&&((T=t.registerForm.get("rePassword"))!=null&&T.touched)?28:-1),s(),h("disabled",t.registerForm.invalid||t.isLoading||t.msgSuccess),s(2),u(31,t.isLoading?31:-1)}},dependencies:[$,z,B,G,V,M,Z,A]});let e=n;return e})();export{pe as RegistrationComponent};
